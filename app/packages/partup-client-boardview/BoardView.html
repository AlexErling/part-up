<template name="BoardView">
    <div class="pu-boardview" data-sortable-board id="board">
        {{#each lanes}}
            <div class="pu-boardview-lane pu-js-sortable-lane" data-lane="{{ _id }}">
                <div class="pu-boardview-lane__header">
                    {{#if partupEquals editLane _id }}
                        <input class="pu-boardview-lane__header__input" type="text" data-lane-name-input="{{ _id }}" autofocus value="{{ name }}">
                    {{else}}
                        <span class="pu-boardview-lane__header__text" data-lane-name="{{ _id }}">
                            {{ name }} <span>{{ activitiesCount }}</span>
                        </span>
                    {{/if}}
                    {{#if moreThanOneLane }}<button class="pu-boardview-lane__header__remove-button" data-remove-button="{{ _id }}" type="button"><i class="picon-times"></i></button>{{/if}}
                </div>
                <ul class="pu-boardview-lane__content" data-sortable-lane="{{ _id }}" id="{{ _id }}">
                    {{#each activities}}
                        <li class="pu-boardview-card pu-js-sortable-card" data-activity="{{ _id }}">
                            {{> Activity activity=. EXPANDABLE=false COMMENTS_LINK=true isUpper=isUpper BOARDVIEW=true }}
                        </li>
                    {{/each}}
                </ul>
                <div class="pu-boardview-lane__footer">
                    <button class="pu-boardview-lane__footer__add-button" data-add-button="{{ _id }}" type="button"><i class="picon-plus"></i>{{_ 'boardview-add-activity-button'}}</button>
                </div>
            </div>
        {{/each}}
        {{#if addLane}}
            <div class="pu-boardview-lane">
                <div class="pu-boardview-lane__header">
                    <input placeholder="{{_ 'boardview-new-input-placeholder'}}" class="pu-boardview-lane__header__input pu-boardview-lane__header__input-full" data-add-lane-input type="text">
                </div>
                <ul class="pu-boardview-lane__content">
                </ul>
            </div>
        {{else}}
            <button class="pu-boardview__add-lane-button" type="button" data-add-lane><i class="picon-plus"></i></button>
        {{/if}}
    </div>
</template>
