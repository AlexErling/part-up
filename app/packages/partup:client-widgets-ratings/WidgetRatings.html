<template name="WidgetRatings">
    <div class="pu-ratings">
        {{# if hasRatings }}
            <ul class="pu-sub-ratings-average">
                {{# each averageRatings }}
                <li class="{{# if . }}pu-state-active{{/ if }}"></li>
                {{/ each }}
            </ul>
        {{ else }}
            <p class="pu-sub-no-rating">{{_ 'ratings-none' }}</p>
        {{/ if }}
        <ul class="pu-avatar-stack">
            {{# if showNewRating }}
                <li class="pu-avatar pu-avatar-icon">
                    <i class="fa fa-plus"></i>
                    <article class="pu-hovercard pu-hovercard-position-bottom {{# if showHoverCard }}pu-hovercard-active{{/ if }}">
                        {{> WidgetRating contribution=contribution }}
                    </article>
                </li>
            {{/ if }}
            {{# each ratings }}
                <li class="pu-avatar" style="background-image: url({{# with upper }}{{ partupImageById profile.image }}{{/ with }})" data-rating-id="{{ _id }}">
                    <article class="pu-hovercard pu-hovercard-position-bottom {{# if showHoverCard }}pu-hovercard-active{{/ if }}">
                        {{> WidgetRating contribution=contribution rating=. }}
                    </article>
                </li>
            {{/ each }}
        </ul>
    </div>
</template>
