<template name="NetworkChat">
    <div class="pu-chat">
        <main>
            <header>
                <form class="pu-form pu-flexible-center" novalidate>
                    <div>
                        <span>
                            <h2 class="pu-title">
                                {{_ 'pages-app-network-chat-title' }}
                            </h2>
                        </span>
                    </div>
                    <div class="pu-sub-center" data-flexible-center>
                        <span>
                            <div class="pu-searchinput">
                                <input type="text" placeholder="Search a message in this chat" class="pu-input form-control" data-search>
                                <i class="picon-search"></i>
                                <i class="picon-times" data-clear></i>
                            </div>
                        </span>
                    </div>
                </form>
            </header>
            <article class="pu-chat-wrapper" data-reversed-scroller-wrapper>
                <div data-preventscroll data-reversed-scroller>

                    {{#each data.messages}}
                        {{> ChatMessage data=.}}
                    {{/each}}
                    <p class="pu-textline pu-textline-light">
                        <span>Do 1/12/2015</span>
                    </p>

                    <p class="pu-textline pu-textline-colour">
                        <span>
                            New messages
                            <i class="picon-arrow-down"></i>
                        </span>
                    </p>
                </div>
            </article>
            <footer>
                <label class="pu-formfield">
                    <div class="pu-sub-tablecell-input">
                        <span class="pu-sub-input">
                            <input data-submit="return" type="text" name="partup_name" placeholder="{{_ 'pages-app-network-chat-placeholder' }}" class="pu-input form-control">
                        </span>
                        <span class="pu-sub-error"></span>
                    </div>
                    <div class="pu-sub-tablecell-button">
                        <button type="submit" class="pu-button">
                            <span>{{_ 'pages-app-network-chat-button-send' }}</span>
                        </button>
                    </div>
                </label>
            </footer>
        </main>
        <aside class="pu-sidebar">
            <section>
                <div class="pu-sidebar-wrap" data-preventscroll>
                    <section>
                        <p>{{{_ 'pages-app-network-chat-sidebar-text' }}}</p>
                    </section>
                    <section>
                        <h2>Active uppers</h2>
                        {{#if data.uppers.length}}
                            <ul class="pu-list pu-list-users">
                                {{#each data.uppers}}
                                {{#unless partupEquals _id currentUserId}}
                                <li>
                                    <a href="{{ pathFor route='profile' _id=_id}}" data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{_id}}">
                                        <figure class="pu-avatar pu-avatar-online" style="background-image:url('{{ partupImageUrl id=profile.data.image store='360x360'}}');"></figure>
                                        <p>{{ profile.name }}</p>
                                        {{#if partupContainsOneInArray _id data.chat.started_typing}}
                                        <span class="pu-typing">
                                            <span></span>
                                            <span></span>
                                            <span></span>
                                        </span>
                                        {{/if}}
                                    </a>
                                </li>
                                {{/unless}}
                                {{/each}}
                            </ul>
                        {{else}}
                            <p>No active uppers</p>
                        {{/if}}
                    </section>
                </div>
            </section>
        </aside>
    </div>
</template>
