<template name="DropdownNotifications">
    <a class="pu-button pu-button-header" data-toggle-menu>
        <!-- bell icon -->
        <i class="fa fa-bell"></i>
        {{_ 'dropdowns-notifications-button-opennotificationsdropdown'}}
    </a>
    <div class="pu-dropdown pu-dropdown-notifications {{#if menuOpen}}pu-dropdown-active{{/if}}" data-clickoutside-close>
        <ul>
            {{#each notifications}}
                <li class="pu-notification {{#unless new}}pu-notification-viewed{{/unless}}">
                    <!-- supporter joined notification -->
                    {{#if partupEqualsExactly type 'partups_supporters_added' }}
                        <a href="{{pathFor route='partup' _id=type_data.partup._id}}">
                            <figure class="pu-avatar pu-avatar-plain">
                                <a href="#" rel="author" data-usercard="{{ type_data.supporter._id }}" class="pu-sub-image pu-sub-image-plain" style="background-image: url('{{ partupImageUrl id=type_data.supporter.image }}');"></a>
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_supporters_added' supporter=type_data.supporter.name partup=type_data.partup.name}}</p>
                                <time>{{ created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- invite for activity notification -->
                    {{#if partupEqualsExactly type 'partup_activities_invited' }}
                        <a href="{{pathFor route='partup-activities' _id=type_data.partup._id}}">
                            <figure class="pu-avatar pu-avatar-plain">
                                <a href="#" rel="author" data-usercard="{{ type_data.inviter._id }}" class="pu-sub-image pu-sub-image-plain" style="background-image: url('{{ partupImageUrl id=type_data.inviter.image }}');"></a>
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partup_activities_invited' inviter=type_data.inviter.name activity=type_data.activity.name}}</p>
                                <time>{{ created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- contribution accepted notification -->
                    {{#if partupEqualsExactly type 'partups_contributions_accepted' }}
                        <a href="{{pathFor route='partup' _id=type_data.partup._id}}">
                            <figure class="pu-avatar pu-avatar-plain">
                                <a href="#" rel="author" data-usercard="{{ type_data.partup._id }}" class="pu-sub-image pu-sub-image-plain" style="background-image: url('{{ partupImageUrl id=type_data.partup.image }}');"></a>
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_contributions_accepted' partup=type_date.partup.name}}</p>
                                <time>{{ created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- contribution rejected notification -->
                    {{#if partupEqualsExactly type 'partups_contributions_rejected' }}
                        <a href="{{pathFor route='partup' _id=type_data.partup._id}}">
                            <figure class="pu-avatar pu-avatar-plain">
                                <a href="#" rel="author" data-usercard="{{ type_data.partup._id }}" class="pu-sub-image pu-sub-image-plain" style="background-image: url('{{ partupImageUrl id=type_data.partup.image }}');"></a>
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_contributions_rejected' activity=type_data.activity.name partup=type_data.partup.name}}</p>
                                <time>{{ created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- invited to network notification -->
                    {{#if partupEqualsExactly type 'partups_networks_invited' }}
                        <a href="{{pathFor route='network-detail' _id=type_data.network._id}}">
                            <figure class="pu-avatar pu-avatar-plain">
                                <a href="#" rel="author" data-usercard="{{ type_data.network._id }}" class="pu-sub-image pu-sub-image-plain" style="background-image: url('{{ partupImageUrl id=type_data.network.image }}');"></a>
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_networks_invited' network=type_data.network.name}}</p>
                                <time>{{ created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- accepted to network notification -->
                    {{#if partupEqualsExactly type 'partups_networks_accepted' }}
                        <a href="{{pathFor route='network-detail' _id=type_data.network._id}}">
                            <figure class="pu-avatar pu-avatar-plain">
                                <a href="#" rel="author" data-usercard="{{ type_data.network._id }}" class="pu-sub-image pu-sub-image-plain" style="background-image: url('{{ partupImageUrl id=type_data.network.image }}');"></a>
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_networks_accepted' network=type_data.network.name }}</p>
                                <time>{{ created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- contribution rating notification -->
                    {{#if partupEqualsExactly type 'contributions_ratings_inserted' }}
                        <a href="{{pathFor route='profile-upper-partups' _id=type_data.rater._id}}">
                            <figure class="pu-avatar pu-avatar-plain">
                                <a href="#" rel="author" data-usercard="{{ type_data.rater._id }}" class="pu-sub-image pu-sub-image-plain" style="background-image: url('{{ partupImageUrl id=type_data.rater.image }}');"></a>
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-contributions_ratings_inserted' rater=type_data.rater.name}}</p>
                                <time>{{ created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- comment on update notification -->
                    {{#if partupEqualsExactly type 'updates_first_comment' }}
                        <a href="{{pathFor route='partup' _id=type_data.partup._id}}">
                            <figure class="pu-avatar pu-avatar-plain">
                                <a href="#" rel="author" data-usercard="{{ type_data.commenter._id }}" class="pu-sub-image pu-sub-image-plain" style="background-image: url('{{ partupImageUrl id=type_data.commenter.image }}');"></a>
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-updates_first_comment' commenter=type_data.commenter.name partup=type_data.partup.name }}</p>
                                <time>{{ created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                </li>
            {{else}}
                <li class="pu-notification pu-notification-empty">
                    <p>{{_ 'dropdowns-notifications-placeholder-nonotifications'}}</p>
                </li>
            {{/each}}
        </ul>
        <footer>
            <a href="">{{_ 'dropdowns-notifications-button-managenotifications'}}</a>
        </footer>
    </div>
</template>
