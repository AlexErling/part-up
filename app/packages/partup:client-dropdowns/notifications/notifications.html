<template name="DropdownNotifications">
    <button class="pu-button pu-button-header pu-button-header-desktop pu-button-header-nostripe" data-toggle-menu="notifications">
        <!-- bell icon -->
        {{#if totalNewNotifications.count }}
            <span class="pu-badge">
                <i class="fa fa-bell"></i>
                <span>{{ totalNewNotifications.count }}</span>
            </span>
        {{else}}
            <i class="fa fa-bell"></i>
        {{/if}}

        {{ label }}
    </button>
    <div class="pu-dropdown pu-dropdown-notifications {{#if menuOpen}}pu-dropdown-active{{/if}} pu-dropdown-notifications-nobutton" data-clickoutside-close>
        <ul>
            {{#each notifications}}
                <li class="pu-notification {{#unless new}}pu-notification-viewed{{/unless}} {{#if clicked}}pu-notification-clicked{{/if}}" data-notification="{{ _id }}">
                    <!-- supporter joined notification -->
                    {{#if partupEqualsExactly type 'partups_supporters_added' }}
                        <a href="{{pathFor route='partup' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.supporter.image }}');" data-usercard="{{ type_data.supporter._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_supporters_added' supporter=type_data.supporter.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- invite for activity notification -->
                    {{#if partupEqualsExactly type 'partup_activities_invited' }}
                        <a href="{{pathFor route='partup-activities' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.inviter.image }}');" data-usercard="{{ type_data.inviter._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partup_activities_invited' inviter=type_data.inviter.name activity=type_data.activity.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- contribution accepted notification -->
                    {{#if partupEqualsExactly type 'partups_contributions_accepted' }}
                        <a href="{{pathFor route='partup' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.accepter.image }}');" data-usercard="{{ type_data.accepter._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_contributions_accepted' accepter=type_data.accepter.name activity=type_data.activity.name}}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- contribution rejected notification -->
                    {{#if partupEqualsExactly type 'partups_contributions_rejected' }}
                        <a href="{{pathFor route='partup' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.rejecter.image }}');" data-usercard="{{ type_data.rejecter._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_contributions_rejected' rejecter=type_data.rejecter.name activity=type_data.activity.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- invited to network notification -->
                    {{#if partupEqualsExactly type 'partups_networks_invited' }}
                        <a href="{{pathFor route='network-detail' slug=type_data.network.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.inviter.image }}');" data-usercard="{{ type_data.inviter._id }}">
                                <!-- <a href="#" rel="author" class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_networks_invited' inviter=type_data.inviter.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.network.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- accepted to network notification -->
                    {{#if partupEqualsExactly type 'partups_networks_accepted' }}
                        <a href="{{pathFor route='network-detail' slug=type_data.network.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.network.image }}');" >
                                <!-- <a href="#" rel="author" class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <!-- nog niet vanuit user -->
                            <article>
                                <p>{{_ 'dropdown-notification-partups_networks_accepted' network=type_data.network.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- added to pending_upper list and waiting for admin approval -->
                    {{#if partupEqualsExactly type 'partups_networks_new_pending_upper' }}
                        <a href="{{pathFor route='network-settings-requests' slug=type_data.network.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.pending_upper.image }}');" >
                                <!-- <a href="#" rel="author" class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_networks_new_pending_upper' network=type_data.network.name pending_upper=type_data.pending_upper.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- contribution rating notification -->
                    {{#if partupEqualsExactly type 'contributions_ratings_inserted' }}
                        <a href="{{pathFor route='partup-activities' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.rater.image }}');" data-usercard="{{ type_data.rater._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-contributions_ratings_inserted' rater=type_data.rater.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- comment on update notification -->
                    {{#if partupEqualsExactly type 'updates_first_comment' }}
                        <a href="{{pathFor route='partup' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.commenter.image }}');" data-usercard="{{ type_data.commenter._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-updates_first_comment' commenter=type_data.commenter.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- new message in partup notification -->
                    {{#if partupEqualsExactly type 'partups_messages_inserted' }}
                        <a href="{{pathFor route='partup' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.creator.image }}');" data-usercard="{{ type_data.creator._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_messages_inserted' creator=type_data.creator.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- new activity in partup notification -->
                    {{#if partupEqualsExactly type 'partups_activities_inserted' }}
                        <a href="{{pathFor route='partup-activities' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.creator.image }}');" data-usercard="{{ type_data.creator._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_activities_inserted' creator=type_data.creator.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- new contribution in partup by partner notification -->
                    {{#if partupEqualsExactly type 'partups_contributions_inserted' }}
                        <a href="{{pathFor route='partup-activities' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.creator.image }}');" data-usercard="{{ type_data.creator._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_contributions_inserted' creator=type_data.creator.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- new contribution in partup by partner notification -->
                    {{#if partupEqualsExactly type 'partups_contributions_proposed' }}
                        <a href="{{pathFor route='partup-update' slug=type_data.partup.slug update_id=type_data.update._id }}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.creator.image }}');" data-usercard="{{ type_data.creator._id }}">
                                <!-- <a href="#" rel="author"  class="pu-sub-image pu-sub-image-plain" ></a> -->
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_contributions_proposed' creator=type_data.creator.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }} {{_ 'dropdown-notification-location' location=type_data.partup.name}}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- reminder to rate contributions in partup notification -->
                    {{#if partupEqualsExactly type 'partups_ratings_reminder' }}
                        <a href="{{pathFor route='partup-activities' slug=type_data.partup.slug}}">
                            <figure class="pu-avatar pu-avatar-plain pu-avatar-system">
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_ratings_reminder' partup=type_data.partup.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                    <!-- user got mentioned in a partup -->
                    {{#if partupEqualsExactly type 'partups_user_mentioned' }}
                        <a href="{{pathFor route='partup-update' slug=type_data.partup.slug update_id=type_data.update._id}}">
                            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=type_data.mentioning_upper.image }}');" data-usercard="{{ type_data.mentioning_upper._id }}">
                            </figure>
                            <article>
                                <p>{{_ 'dropdown-notification-partups_user_mentioned' partup=type_data.partup.name mentioning_upper=type_data.mentioning_upper.name }}</p>
                                <time>{{ partupDatePartupTimeline created_at }}</time>
                            </article>
                        </a>
                    {{/if}}
                </li>
            {{else}}
                <li class="pu-notification pu-notification-empty">
                    <p>{{_ 'dropdowns-notifications-placeholder-nonotifications'}}</p>
                </li>
            {{/each}}
        </ul>
        {{#if false}}
            <footer>
                <a href="#">{{_ 'dropdowns-notifications-button-managenotifications'}}</a>
            </footer>
        {{/if}}
    </div>
</template>
