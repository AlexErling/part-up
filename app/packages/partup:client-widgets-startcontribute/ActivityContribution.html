<template name="ActivityContribution">
    <article class="pu-block pu-block-container pu-contribution">
        <div class="pu-block-container-child">
            <h2 class="pu-block-title">{{name}}</h2>

            <p class="pu-paragraph">{{description}}</p>

            <time>{{end_date}}</time>
        </div>
        <div class="pu-block-container-child">
            {{#autoForm id=generateFormId schema=formSchema doc=fieldsFromContribution class="pu-form  pu-form-contribution"}}
                <!-- want -->
                {{> afFieldInput name='types_want_enabled' class="pu-checkbox" theme="partup" }}
                <button class="pu-button pu-button-icon pu-button-checkbox" data-toggle-want="types_want_enabled">
                    <i class="fa fa-thumbs-up"></i>
                    {{_ 'startcontribute-form-want-label'}}
                </button>

                <!-- can -->
                <div class="pu-popover" data-open-contribution="showCanContribute">
                    {{> afFieldInput name='types_can_enabled' class="pu-checkbox" }}
                    <label class="pu-button pu-button-icon pu-button-checkbox">
                        <i class="fa fa-wrench"></i>
                        {{_ 'startcontribute-form-can-label'}}
                    </label>

                    <div class="pu-popover-inner {{#if afFieldValueIs name="types_can_amount" value=true}}pu-popover-inner-show{{/if}}">
                        <!-- data-contribution-can -->
                        <span>{{_ 'startcontribute-form-can_amount-label'}}</span>
                        {{> afFieldInput name='types_can_amount' placeholder=placeholders.can_amount class="pu-input" data-change-contribution="contributeCanAmount" }}
                    </div>
                </div>

                <!-- have -->
                <div class="pu-popover" data-open-contribution="showHaveContribute">
                    {{> afFieldInput name='types_have_enabled' class="pu-checkbox" }}
                    <label class="pu-button pu-button-icon pu-button-checkbox">
                        <i class="fa fa-user-plus"></i>
                        {{_ 'startcontribute-form-have-label'}}
                    </label>

                    <div class="pu-popover-inner {{#if showHaveContribute}}pu-popover-inner-show{{/if}}">
                        <span>{{_ 'startcontribute-form-have_amount-label'}}</span>
                        {{> afFieldInput name='types_have_amount' placeholder=placeholders.have_amount class="pu-input" data-change-contribution="contributeHaveAmount" }}
                        <span>{{_ 'startcontribute-form-have_description-label'}}</span>
                        {{> afFieldInput name='types_have_description' placeholder=placeholders.have_description class="pu-input" data-change-contribution="contributeHaveDescription" }}
                    </div>
                </div>
                <input type="submit" value="submit contribute form"/>
            {{/autoForm}}
        </div>

        {{#each contributions}}
            <div class="pu-block-container-child">
                <div class="pu-contributionlist">
                    <figure class="pu-avatar pu-avatar-small" style="{{#if userImage}}background-image:url('{{userImage.url}}');{{/if}}"></figure>
                    <ul class="pu-list">
                        {{#if types.want.enabled}}
                            <li>
                                <span>{{_ 'startcontribute-summary-want-label'}}</span>
                            </li>
                        {{/if}}
                        {{#if types.can.enabled}}
                            <li>
                                <span>{{_ 'startcontribute-summary-can-label'}}</span>
                                <a href="" class="pu-button pu-button-label pu-button-label-removable"
                                   data-clear="contributeCanAmount">
                                    <span>€ {{ types.can.amount }}</span>
                                    <i class="fa fa-remove"></i>
                                </a>
                            </li>
                        {{/if}}
                        {{#if types.have.enabled}}
                            <li>
                                <span>{{_ 'startcontribute-summary-have-label'}}</span>
                                {{#if types.have.amount }}
                                    <a href="" class="pu-button pu-button-label pu-button-label-removable"
                                       data-clear="contributeHaveAmount">
                                        <span>€ {{ types.have.amount }}</span>
                                        <i class="fa fa-remove"></i>
                                    </a>
                                {{/if}}
                                {{#if types.have.description }}
                                    <a href=""
                                       class="pu-button pu-button-label pu-button-label-secondary pu-button-label-removable"
                                       data-clear="contributeHaveDescription">
                                        <span>{{ types.have.description }}</span>
                                        <i class="fa fa-remove"></i>
                                    </a>
                                {{/if}}
                            </li>
                        {{/if}}
                    </ul>
                </div>
            </div>
        {{/each}}
    </article>
</template>

<template name="afCheckbox_partup">
    <input type="checkbox" value="true" {{atts}} />
</template>