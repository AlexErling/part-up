<template name="ActivityContribution">
    <article class="pu-block pu-block-container pu-contribution">
        <div class="pu-block-container-child">
            <h2 class="pu-block-title">{{name}}</h2>

            <p class="pu-paragraph">{{description}}</p>

            <time datetime="{{ partupDateISO end_date }}">{{ partupDateNormal end_date }}</time>
        </div>
        <div class="pu-block-container-child">
            {{#autoForm id=generateFormId schema=formSchema doc=fieldsFromContribution class="pu-form  pu-form-contribution"}}
                <!-- want -->
                {{> afFieldInput name='types_want_enabled' template="partup" }}
                <button type="button" class="pu-button pu-button-icon pu-button-checkbox" data-toggle-want="types_want_enabled">
                    <i class="fa fa-thumbs-up"></i>
                    {{_ 'startcontribute-form-want-label'}}
                </button>

                <!-- can -->
                <div class="pu-popover">
                    {{> afFieldInput name='types_can_enabled' template="partup" }}
                    <button type="button" class="pu-button pu-button-icon pu-button-checkbox" data-toggle-can>
                        <i class="fa fa-wrench"></i>
                        {{_ 'startcontribute-form-can-label'}}
                    </button>

                    <div class="pu-popover-inner {{#if canDropdownEnabled}}pu-popover-inner-show{{/if}}">
                        <span>{{_ 'startcontribute-form-can_amount-label'}}</span>
                        {{> afFieldInput name='types_can_amount' placeholder=placeholders.can_amount class="pu-input"}}
                        <button type="button" data-remove-can>x</button>
                    </div>
                </div>

                <!-- have -->
                <div class="pu-popover" data-open-contribution="showHaveContribute">
                    {{> afFieldInput name='types_have_enabled' template="partup" }}
                    <button type="button" class="pu-button pu-button-icon pu-button-checkbox" data-toggle-have>
                        <i class="fa fa-user-plus"></i>
                        {{_ 'startcontribute-form-have-label'}}
                    </button>

                    <div class="pu-popover-inner pu-popover-inner-last {{#if haveDropdownEnabled}}pu-popover-inner-show{{/if}}">
                        <span>{{_ 'startcontribute-form-have_amount-label'}}</span>
                        {{> afFieldInput name='types_have_amount' placeholder=placeholders.have_amount class="pu-input" }}
                        <span>{{_ 'startcontribute-form-have_description-label'}}</span>
                        {{> afFieldInput name='types_have_description' placeholder=placeholders.have_description class="pu-input" }}
                        <button type="button" data-remove-have>x</button>
                    </div>
                </div>
            {{/autoForm}}
        </div>

        {{#each contributions}}
            {{#if validContributionExists}}
            <div class="pu-block-container-child">
                <div class="pu-contributionlist">
                    {{#if userImage}}
                        <figure class="pu-avatar pu-avatar-small" style="background-image:url('{{userImage.url}}');"></figure>
                    {{else}}
                        <figure class="pu-avatar pu-avatar-small" alt="{{upper_id}}"></figure>
                    {{/if}}
                    <ul class="pu-list">
                        {{#if types.want.enabled}}
                            <li>
                                <span>{{_ 'startcontribute-summary-want-label'}}</span>
                            </li>
                        {{/if}}
                        {{#if types.can.enabled}}
                            <li>
                                <span>{{_ 'startcontribute-summary-can-label'}}</span>
                                <a href="#" class="pu-button pu-button-label">
                                <span>€ {{ types.can.amount }}</span>
                                </a>
                            </li>
                        {{/if}}
                        {{#if types.have.enabled}}
                            <li>
                                <span>{{_ 'startcontribute-summary-have-label'}}</span>
                                {{#if types.have.amount }}
                                    <a class="pu-button pu-button-label">
                                        € {{ types.have.amount }}
                                    </a>
                                {{/if}}
                                {{#if types.have.description }}
                                    <a class="pu-button pu-button-label pu-button-label-secondary">
                                        {{ types.have.description }}
                                    </a>
                                {{/if}}
                            </li>
                        {{/if}}
                    </ul>
                </div>
            </div>
            {{/if}}

        {{/each}}
    </article>
</template>
