<template name="WidgetStartActivities">
    <div class="pu-composition pu-composition-defaultmodal pu-composition-startpartup-activities {{#if partupEquals windowScrollBottom false }}pu-composition-fixedfooter{{/if}}">

        <h2 class="pu-title pu-title-modal">{{_ 'startactivities-heading-title'}}</h2>
        <p>{{_ 'startactivities-heading-paragraph'}}</p>

        <!-- TODO: DISABLED UNTIL IMPLEMENTED
        <a class="pu-button pu-button-text pu-button-no-side-padding" href="#">{{_ 'startactivities-button-adopt_activities' }}</a>
        -->

        {{#autoForm schema=formSchema id="activityForm" class="pu-form pu-form-highlighted" validation="submit" }}

            <!-- Activity name --> 
            <label class="pu-formfield">
                <span class="pu-label">{{_ 'startactivities-form-name-label'}}</span>
                <a class="pu-hint">
                    {{_ 'startactivities-form-name-validation' Partup.schemas.forms.startActivities._schema.name.max }}
                </a>
                <div class="pu-sub-validations {{#if afFieldIsInvalid name='name' }}pu-state-invalid{{/if}}">
                    <span class="pu-sub-input">{{> afFieldInput name='name' placeholder=placeholders.name class="pu-input" }}</span>
                    <span class="pu-sub-error">{{ afFieldMessage name='name' }}</span>
                </div>
            </label>

            <!-- Activity description -->
            <label class="pu-formfield">
                <span class="pu-label">{{_ 'startactivities-form-description-label'}}</span>
                <a class="pu-hint">
                    {{_ 'startactivities-form-description-validation' Partup.schemas.forms.startActivities._schema.description.max }}
                </a>
                <div class="pu-sub-validations {{#if afFieldIsInvalid name='description' }}pu-state-invalid{{/if}}">
                    <span class="pu-sub-input">{{> afFieldInput name='description' placeholder=placeholders.description class="pu-textarea" rows=3 }}</span>
                    <span class="pu-sub-error">{{ afFieldMessage name='description' }}</span>
                </div>
            </label>

            <!-- Activity end date -->
            <div class="pu-formfield">
                {{#unless showDatePicker}}
                    <div class="pu-formfield-left" data-end-date-button>
                        <a class="pu-button pu-button-text pu-button-text-gray">
                            <i class="fa fa-calendar"></i>
                            {{_ 'startactivities-form-end_date-label' }}
                        </a>
                    </div>
                {{else}}
                    <div class="end-date-field">
                        <label class="pu-formfield">
                            <span class="pu-label">{{_ 'startactivities-form-end_date-label'}}</span>
                            <div class="pu-sub-validations {{#if afFieldIsInvalid name='end_date' }}pu-state-invalid{{/if}}">
                                <div class="pu-sub-input pu-inputholder pu-inputholder-lefticon">
                                    {{> afFieldInput name='end_date' placeholder=placeholders.end_date class="pu-input pu-datepicker" data-datepicker="" type="text" onfocus="(this.type='date')"}}
                                    <span class="pu-icon"><i class="fa fa-calendar"></i></span>
                                </div>
                                <span class="pu-sub-error">{{ afFieldMessage name='end_date' }}</span>
                            </div>
                        </label>
                    </div>
                {{/unless}}

                <div class="pu-formfield-right">
                    <input class="pu-button pu-button-primary" type="submit" value="{{_ 'startactivities-form-submit' }}">
                </div>
            </div>
        {{/autoForm}}

        {{#each partupActivities}}
            {{> Activity}}
        {{/each}}

        <!-- Continue button -->
        <footer class="pu-sub-modalfooter {{#if partupEquals windowScrollBottom false }}pu-sub-modalfooter-fixed{{/if}}">
            <div class="pu-sub-footer-container">
                <a href="{{pathFor 'start-contribute' _id=currentPartupId }}" class="pu-button pu-button-primary">
                    {{_ 'startactivities-button-next_page' }}
                </a>
            </div>
        </footer>
    
    </div>
</template>