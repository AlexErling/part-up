<template name="WidgetStartDetails">
    <div class="pu-composition pu-composition-defaultmodal">

        <h2 class="pu-title pu-title-modal">{{_ 'startdetails-coolyouarestarting' user.profile.name }}</h2>
        <p>{{_ 'startdetails-explainingpartup' }}</p>

        {{#autoForm schema=Partup.schemas.forms.startPartup id="partupForm" doc=fieldsFromPartup class="pu-form" validation="submitThenBlur" }}
            
            <!-- Name -->
            <label class="pu-formfield">
                <span class="pu-label">{{_ 'startdetails-form-name-label' }}</span>
                <a class="pu-hint">
                    {{_ 'startdetails-form-name-validation' Partup.schemas.entities.partup._schema.name.max }}
                </a>
                <div class="pu-sub-validations {{#if afFieldIsInvalid name='name' }}pu-state-invalid{{/if}}">
                    <span class="pu-sub-input">{{> afFieldInput name='name' placeholder=placeholders.name class="pu-input" }}</span>
                    <span class="pu-sub-error">{{ afFieldMessage name='name' }}</span>
                </div>
            </label>

            <!-- Description -->
            <label class="pu-formfield">
                <span class="pu-label">{{_ 'startdetails-form-description-label'}}</span>
                <a class="pu-hint">
                    {{_ 'startdetails-form-description-validation' Partup.schemas.entities.partup._schema.description.max }}
                </a>
                <div class="pu-sub-validations {{#if afFieldIsInvalid name='description' }}pu-state-invalid{{/if}}">
                    <span class="pu-sub-input">{{> afFieldInput name='description' placeholder=placeholders.description class="pu-textarea"  rows=3 }}</span>
                    <span class="pu-sub-error">{{ afFieldMessage name='description' }}</span>
                </div>
            </label>
            
            <!-- Tags -->
            <label class="pu-formfield">
                <span class="pu-label">{{_ 'startdetails-form-tags_input-label'}}</span>
                <a class="pu-hint pu-tooltip">
                    {{_ 'startdetails-form-tags_input-validation' }}
                    <span class="pu-tooltip-wrapper"><p class="pu-paragraph">{{_ 'startdetails-form-tags_input-tooltip' }}</p></span>
                </a>
                <div class="pu-sub-validations {{#if afFieldIsInvalid name='tags_input' }}pu-state-invalid{{/if}}">
                    <span class="pu-sub-input">{{> afFieldInput name='tags_input' placeholder=placeholders.tags_input class="pu-input" }}</span>
                    <span class="pu-sub-error">{{ afFieldMessage name='tags_input' }}</span>
                </div>
            </label>

            <!-- End date -->
            <label class="pu-formfield">
                <span class="pu-label">{{_ 'startdetails-form-end_date-label'}}</span>
                <a class="pu-hint pu-tooltip">
                    {{_ 'startdetails-form-end_date-validation' }}
                    <span class="pu-tooltip-wrapper"><p class="pu-paragraph">{{_ 'startdetails-form-end_date-tooltip' }}</p></span>
                </a>
                <div class="pu-sub-validations {{#if afFieldIsInvalid name='end_date' }}pu-state-invalid{{/if}}">
                    <div class="pu-inputholder pu-inputholder-lefticon">
                        {{> afFieldInput name='end_date' placeholder=placeholders.end_date class="pu-input pu-datepicker" data-datepicker="" type="text" onfocus="(this.type='date')"}}
                        <span class="pu-icon"><i class="fa fa-calendar"></i></span>
                    </div>
                    <span class="pu-sub-error">{{ afFieldMessage name='end_date' }}</span>
                </div>
            </label>

            <!-- Location -->
            <label class="pu-formfield">
                <span class="pu-label">{{_ 'startdetails-form-location_input-label'}}</span>
                <div class="pu-sub-validations {{#if afFieldIsInvalid name='location_input' }}pu-state-invalid{{/if}}">
                    <span class="pu-sub-input">{{> afFieldInput name='location_input' placeholder=placeholders.location_input class="pu-input" }}</span>
                    <span class="pu-sub-error">{{ afFieldMessage name='location_input' }}</span>
                </div>
            </label>

            <!-- TODO: NETWORK IMPLEMENTATION
            <label class="pu-formfield">
                <span class="pu-label">{{_ 'startdetails-form-network-label' }}</span>
                <div class="pu-inputholder pu-inputholder-righticon">
                    <select class="pu-select">
                        <option value="1">1. Aan Part-up.com (openbaar)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                    <span class="pu-icon"><i class="fa fa-caret-down"></i></span>
                </div>
                <a class="pu-hint pu-tooltip">
                    {{_ 'startdetails-form-network-validation' }}
                    <span class="pu-tooltip-wrapper"><p class="pu-paragraph">{{_ 'startdetails-form-network-tooltip' }}</p></span>
                </a>
            </label>
            -->

            <!-- Image -->
            <div class="pu-formfield">
                <span class="pu-label">{{_ 'startdetails-image-label' }}</span>
                <div class="pu-upload pu-upload-large">
                    <button class="pu-button pu-button-secondary {{#if uploadingPictures}}pu-state-loading{{/if}}" data-browse-photos>
                        <span>{{_ 'startdetails-image-button'}}</span>
                        {{#if uploadingPictures}}
                            {{> WidgetSpinnerInverted}}
                        {{/if}}
                    </button>
                    <span>{{_ 'startdetails-image-validation'}}</span>
                    <input type="file" class="pu-fileinput" data-imageupload>
                    {{> afFieldInput name="image" type="hidden"}}
                </div>
                {{#if uploadedImage.url}}
                    <figure class="pu-imagepreview pu-imagepreview-large" style="background-image: url('{{ uploadedImage.url }}')"></figure>
                {{else}}
                    <div class="pu-imagepreview pu-imagepreview-large pu-imagepreview-placeholder"></div>

                    {{#if suggestedImagesAvailable}}
                        <p class="pu-textline"><span>{{_ 'startdetails-suggestion-label'}}</span></p>
                        <div class="pu-suggestionsgallery">
                            <ul>
                                {{#each suggestedImages}}
                                    <li><div><img src="{{imageUrl}}" alt="{{authorUrl}}"></div></li>
                                {{/each}}
                            </ul>
                        </div>
                    {{/if}}

                {{/if}}
            </div>

            <!-- Submit button -->
            <footer class="pu-sub-modalfooter">
                <div class="pu-sub-footer-container">
                    <input class="pu-button pu-button-primary" type="submit" value="{{_ 'startdetails-form-submit'}}">
                </div>
            </footer>
        {{/autoForm}}

    </div>
</template>
