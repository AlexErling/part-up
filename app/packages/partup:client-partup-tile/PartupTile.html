<template name="PartupTile">
    <article class="pu-partuptile">

        <!-- Tags -->
        {{# unless HIDE_TAGS }}
            {{# with partup.mappedTags }}
                <ul class="pu-sub-partup-tags">
                    {{# each . }}
                        <li style="transition-delay: {{ delay }}s"><span class="pu-tag">{{ tag }}</span></li>
                    {{/ each }}
                </ul>
            {{/ with }}
        {{/unless}}

        {{# with partup }}

            <!-- Name of the Part-up -->
            <header>
                <h2>
                    <a href="{{pathFor 'partup' slug=slug }}">{{ name }}</a>
                </h2>
            </header>

            <section>

                <!-- Image (circle), uppers, and progress  -->
                <div class="pu-partupcircle">
                    <a href="{{pathFor 'partup' slug=slug }}">
                        {{# with boundedProgress }}<canvas class="pu-sub-radial" data-percent="{{ . }}"></canvas>{{/ with }}
                        <figure class="pu-sub-inner" style="
                            {{# with imageUrl }}background-image: url('{{ . }}');{{/ with }}
                        " data-partup-tile-focuspoint></figure>
                    </a>

                    <!-- Uppers -->
                    {{# if avatars }}
                        <ul class="pu-sub-avatar-list" style="margin-bottom:40px;">
                            {{# each avatars }}
                                {{# if data.upper }}
                                     <li class="pu-avatar" style="
                                        {{# with data.upperImageUrl }}background-image: url('{{ . }}');{{/ with }}
                                        {{# with avatarPosition }}
                                            top: {{ y }}px;
                                            left: {{ x }}px;
                                            transition-delay: {{ delay }}s;
                                        {{/ with }}
                                    " data-usercard="{{ data.upper._id }}"></li>
                                {{ else }}
                                    <li class="pu-avatar pu-avatar-more" style="
                                        {{# with avatarPosition }}
                                            top: {{ y }}px;
                                            left: {{ x }}px;
                                            transition-delay: {{ delay }}s;
                                        {{/ with }}
                                    ">{{ data.remainingUppers }}</li>
                                {{/ if }}
                            {{/ each }}
                        </ul>
                    {{/ if }}
                </div>

                <!-- Description -->
                <p>{{ description }}</p>

                <!-- Stats (activities, supporters, days active) -->
                <ul class="pu-sub-partup-stats">
                    <li>
                        <strong>{{ activityCount }}</strong>
                        <span>{{_ 'partuptile-activities' }}</span>
                    </li>
                    <li>
                        <strong>{{ supporterCount }}</strong>
                        <span>{{_ 'partuptile-supporters' }}</span>
                    </li>
                    <li>
                        <strong>{{ dayCount }}</strong>
                        <span>{{_ 'partuptile-days-active' }}</span>
                    </li>
                </ul>
            </section>

        {{/ with }}

        <!-- Network -->
        {{# unless HIDE_NETWORKTILE }}
            {{# with partup.networkObject }}
                <footer>
                    <a href="{{ pathFor 'network-detail' slug }}" class="pu-networktile">
                        <div class="pu-sub-figurecontainer">
                            <figure style="
                                {{# with iconUrl }}background-image: url('{{ . }}');{{/ with }}
                            "></figure>
                        </div>
                        <div class="pu-sub-namecontainer">
                            <span>{{ name }}</span>
                        </div>
                    </a>
                </footer>
            {{/ with }}
        {{/ unless }}

    </article>
</template>
