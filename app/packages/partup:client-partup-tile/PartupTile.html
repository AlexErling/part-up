<template name="PartupTile">

    <article class="pu-partuptile">

        <!-- Tags -->
        {{# if tags }}
        <ul class="pu-sub-partup-tags">
            {{# each tags }}
            <li style="transition-delay: {{ delay }}s"><span class="pu-tag">{{ tag }}</span></li>
            {{/ each }}
        </ul>
        {{/ if }}

        <!-- Name of the Part-up -->
        <header>
            <h2>
                <a href="{{pathFor 'partup' _id=_id }}">{{ name }}</a>
            </h2>
        </header>

        <section>

            <!-- Image (circle), uppers, and progress  -->
            <div class="pu-partupcircle">
                <a href="{{pathFor 'partup' _id=_id }}">
                    <canvas class="pu-sub-radial" data-percent="{{ progress }}"></canvas>
                    <figure class="pu-sub-inner" style="{{#if image }}background-image: url('{{ partupImageUrl id=image }}');{{/if }}" data-partup-tile-focuspoint></figure>
                </a>
                <!-- Uppers -->
                {{# if uppers }}
                <ul class="pu-sub-avatar-list">
                    {{# each uppers }}
                    <li class="pu-avatar" style="background-image: url('{{# with upper }}{{ partupImageUrl id=profile.image store='80x80' }}{{/ with }}'); top: {{ y }}px; left: {{ x }}px; transition-delay: {{ delay }}s;" data-usercard="{{ _id }}"></li>
                    {{/ each }}
                </ul>
                {{/ if }}
            </div>

            <!-- Description -->
            <p>{{ description }}</p>

            <!-- Stats (activities, supporters, days active) -->
            <ul class="pu-sub-partup-stats">
                <li>
                    <strong>{{ activityCount }}</strong>
                    <span>{{_ 'partuptile-activities' }}</span>
                </li>
                <li>
                    <strong>{{ supporterCount }}</strong>
                    <span>{{_ 'partuptile-supporters' }}</span>
                </li>
                <li>
                    <strong>{{ dayCount }}</strong>
                    <span>{{_ 'partuptile-days-active' }}</span>
                </li>
            </ul>
        </section>

        <!-- Network -->
        {{# unless HIDE_NETWORKTILE }}
            {{# with network }}
                <footer>
                    <a href="{{ pathFor 'network-detail' _id }}" class="pu-networktile">
                        <div class="pu-sub-figurecontainer">
                            <figure style="{{# with icon}}background-image: url('{{ partupImageUrl id=. store='32x32' }}');{{/ with }}"></figure>
                        </div>
                        <span>{{ name }}</span>
                    </a>
                </footer>
            {{/ with }}
        {{/ unless }}

    </article>

</template>
