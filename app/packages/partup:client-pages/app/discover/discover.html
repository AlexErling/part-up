<template name="app_discover">

    <article class="pu-layout pu-layout-tinted">

        <div id="discoverHeader" class="pu-sub-pageheader pu-sub-pageheader-fixed {{#if shrinkPageHeader }}pu-sub-pageheader-shrinked{{/if }}">
            <div class="pu-wrap">

                <form id="discoverQuery">
                    <div class="pu-filterbar">
                        <p class="pu-sub-label">Laat mij zien</p>

                        <!-- Search query -->
                        <div class="pu-sub-input"><input type="text" class="pu-input pu-input-filter" name="search_query" placeholder="Zoekwoord"></div>

                        <p class="pu-sub-label">Part-ups in</p>

                        <!-- Network selector -->
                        <div class="pu-sub-input pu-dropdownie-container">
                            <input type="hidden" name="network_id" value="{{ selectedNetwork._id }}">
                            <a href="#" class="pu-button pu-button-input pu-button-input-filter" data-open-networkselector>
                                {{#with selectedNetwork }}
                                    {{ name }}
                                    <i class="fa fa-times" data-reset-selected-network></i>
                                {{else }}
                                    Alle tribes
                                {{/with }}
                            </a>
                            {{> Dropdown toggle=networkSelectorToggle template="NetworkSelector" data=networkSelectorData }}
                        </div>

                        <p class="pu-sub-label">uit</p>

                        <!-- Location selector-->
                        <div class="pu-sub-input pu-dropdownie-container">
                            <input type="hidden" name="location_id" value="{{ selectedLocation.id }}">
                            <a href="#" class="pu-button pu-button-input pu-button-input-filter" data-open-locationselector>
                                {{#with selectedLocation }}
                                    {{ city }}
                                    <i class="fa fa-times" data-reset-selected-location></i>
                                {{else }}
                                    Overal
                                {{/with }}
                            </a>
                            {{> Dropdown toggle=locationSelectorToggle template="LocationSelector" data=locationSelectorData }}
                        </div>

                        <!-- <div class="pu-sub-input"><input type="text" class="pu-input" placeholder="Nederland"></div>
                        <p class="pu-sub-label">gesorteerd op</p>
                        <div class="pu-sub-input"><input type="text" class="pu-input" placeholder="Beste match"></div> -->
                        <input type="submit" value="Versturen" class="pu-sub-submit">
                    </div>
                </form>

            </div>
        </div>

        <div class="pu-sub-discoverheaderplaceholder"></div>

        <div class="pu-sub-pagecontainer pu-sub-pagecontainer-full">

            <div class="pu-page pu-page-full">
                <section class="pu-composition pu-composition-discover">
                    <header>
                        <h2 class="pu-title pu-title-home">
                            {{_ 'pages-app-discover-heading' }}
                            <span class="pu-sub-countlabel">
                                {{#unless partupsLoading }}
                                    {{#if count}}
                                        {{_ 'pages-app-discover-xpartups' count=count }}
                                    {{else}}
                                        {{_ 'pages-app-discover-nopartups' }}
                                    {{/if}}
                                {{else}}
                                    {{_ 'pages-app-discover-loading' }}
                                {{/unless}}
                            </span>
                            {{# if showProfileCompletion }}
                                <span class="pu-paragraph pu-paragraph-subtle">{{_ 'pages-app-discover-profilecompletion' profileCompletion=profileCompletion }}</span>
                            {{/ if }}
                        </h2>
                    </header>
                    <div data-infinitescroll-container>
                        {{> ColumnsLayout
                            COLUMNS=4
                            TEMPLATE="PartupTile"
                            addHook=addToLayoutHook
                            clearHook=clearLayoutHook
                        }}
                    </div>
                </section>
            </div>
        </div>
    </article>

</template>
