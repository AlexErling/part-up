<template name="app_partup_sidebar">

    {{#if partupIsPopupActive 'take-part' }}
        {{#contentFor region="PopupTitle"}}
            {{_ 'pages-app-partup-takepart-title'}}
        {{/contentFor}}
        {{> contentFor region="PopupContent" template="app_partup_takepart" }}
    {{/if}}

    <!-- sidebar header image -->
    <header class="pu-partupheader">
        <figure class="pu-sub-picture" style="{{#with partup.image }}background-image: url('{{ partupImageUrl id=. store='1200x520' }}');{{/with}}" data-partupcover-focuspoint></figure>
        <h1>{{ partup.name }}</h1>
    </header>

    <!-- sidebarcontent -->
    <aside class="pu-sidebar">
        <section class="pu-sub-dark">
            <div class="pu-sidebar-wrap">
                <section>
                    <p class="pu-sub-abstract">{{{ partupAutolink partup.description }}}</p>
                    <ul class="pu-list pu-list-horizontal pu-list-tags">
                        {{#each partup.tags }}
                            <li><span class="pu-tag pu-tag-inverted">{{ . }}</span></li>
                        {{/each }}
                    </ul>
                    <ul class="pu-list pu-list-horizontal">
                        {{# if showTakePartButton }}
                            <li class="pu-sub-button">

                                    <!-- take part popup -->
                                    <a class="pu-button" data-open-takepart-popup>
                                        <i class="picon-info"></i>
                                        {{_ 'pages-app-partup-take_part' }}
                                    </a>

                            </li>
                        {{/ if }}
                        <li class="pu-sub-button">
                            <a href="#" class="pu-button" data-invite>
                                <i class="picon-person-plus picon-large"></i>
                                {{_ 'pages-app-partup-invite' }}
                            </a>
                        </li>
                    </ul>
                </section>
                <section>
                    <h2>{{_ 'pages-app-partup-share_title' }}</h2>
                    <ul class="pu-list pu-list-horizontal pu-sub-socials">
                        <li>
                            <a class="pu-button pu-button-social pu-button-social-twitter" data-share-twitter>
                                <i class="picon-twitter"></i>
                                {{ partup.shared_count.twitter }}
                            </a>
                        </li>
                        <li>
                            <a class="pu-button pu-button-social pu-button-social-facebook" data-share-facebook>
                                <i class="picon-facebook"></i>
                                {{ partup.shared_count.facebook }}
                            </a>
                        </li>
                        <li>
                            <a class="pu-button pu-button-social pu-button-social-linkedin" data-share-linkedin>
                                <i class="picon-linkedin"></i>
                                {{ partup.shared_count.linkedin }}
                            </a>
                        </li>
                        <li>
                            <a class="pu-button pu-button-social" data-share-mail>
                                <i class="picon-monkeytail"></i>
                                {{ partup.shared_count.email }}
                            </a>
                        </li>
                    </ul>
                </section>
                <section>
                    <h2>{{_ 'pages-app-partup-uppers_title' }}</h2>
                    <ul class="pu-list pu-list-users">
                        {{#each partupUppers }}
                            <li>
                                <figure data-usercard="{{ _id }}" class="pu-avatar pu-avatar-{{#if status.online }}online{{ else }}offline{{/if }}" style="{{#with profile.image}}background-image: url('{{ partupImageUrl id=. store='80x80' }}'){{/with}}"></figure>
                                <p data-usercard="{{ _id }}">{{ profile.name }}</p>
                            </li>
                        {{/each }}
                    </ul>
                    <!-- <a data-invite class="pu-button pu-button-icon">
                        <i class="picon-person-plus"></i>
                        {{_ 'pages-app-partup-uppers_invitebutton' }}
                    </a> -->
                </section>
            </div>
        </section>
        <section class="pu-sub-light">
            <div class="pu-sidebar-wrap">
                <section>
                    {{#if partupSupporters }}
                        <h2>{{_ 'pages-app-partup-supporters_title'}} ({{ numberOfSupporters }})</h2>
                        <ul class="pu-list pu-list-horizontal pu-list-avatars">
                            {{#each partupSupporters }}
                                <li><figure data-usercard="{{ _id }}" class="pu-avatar pu-avatar-{{#if status.online }}online{{ else }}offline{{/if }}" style="{{#with profile.image}}background-image: url('{{ partupImageUrl id=. store='80x80' }}'){{/with}}"></figure></li>
                            {{/each }}
                        </ul>
                    {{else}}
                        <h2>{{_ 'pages-app-partup-supporters_title'}}</h2>
                        <p>{{_ 'pages-app-partup-supporters_placeholder'}}</p>
                    {{/if}}
                    {{#unless isUpperInPartup}}
                        {{#if isSupporter }}
                            <a data-leavesupporters class="pu-button pu-button-smallicon">
                                <i class="picon-times"></i>
                                {{_ 'pages-app-partup-supporters_leave' }}
                            </a>
                        {{ else }}
                            <a data-joinsupporters class="pu-button">
                                <i class="picon-megaphone"></i>
                                {{_ 'pages-app-partup-supporters_join' }}
                            </a>
                        {{/if}}
                    {{/unless}}
                </section>
                <section>
                    <p class="pu-sub-statustext">{{{ statusText }}}</p>
                </section>
            </div>
        </section>
    </aside>
</template>
