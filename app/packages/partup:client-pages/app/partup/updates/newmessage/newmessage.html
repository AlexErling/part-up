<template name="app_partup_updates_newmessage">
    {{#autoForm schema=formSchema id="newMessageForm" class="pu-form pu-form-popup" }}
        <label class="pu-formfield">
            <div class="pu-sub-validations">
                <span class="pu-sub-input">
                    <div class="pu-message {{#if uploadedPhotos.length}}pu-message-haspictures{{/ if}}">
                        {{> afFieldInput name="text" placeholder=placeholders.text class="pu-textarea" rows=3 autofocus=""}}
                        {{#if uploadedPhotos.length}}
                            <ul class="pu-sub-photos">
                                {{#each uploadedPhotos}}
                                    <li>
                                        <figure class="pu-thumbnail pu-thumbnail-removable" style="background-image:url('{{ partupImageUrl id=. }}')" data-remove-upload="{{ . }}"></figure>
                                    </li>
                                {{/each}}
                            </ul>
                        {{/if}}
                    </div>
                </span>
                <span class="pu-sub-error">ERROR</span>
            </div>
        </label>
        <footer class="pu-row">
            <div class="cell">
                <input type="submit" class="pu-button" value="{{_ 'pages-app-partup-updates-newmessage-submit'}}">
            </div>
            <div class="cell stretch">
                <a class=" pu-button pu-button-text pu-button-text-subtle" data-dismiss>{{_ 'pages-app-partup-updates-newmessage-close'}}</a>
            </div>
            <div class="cell last">
                <input type="file" class="pu-fileinput" multiple data-photo-input>
                <button class="pu-button pu-button-secondary {{#if uploadingPhotos}}pu-state-loading{{/if}} {{#if photoLimitReached}}pu-state-disabled{{/if}}" data-browse-photos>
                    <span>{{_ 'pages-app-partup-updates-newmessage-addphoto'}}</span>
                    {{#if uploadingPhotos}}
                        {{> Spinner color='inverted' type='small'}}
                    {{/if}}
                </button>
            </div>
        </footer>
    {{/autoForm}}
</template>
